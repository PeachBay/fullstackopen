{"version":3,"sources":["components/Filter.js","components/Persons.js","components/PersonForm.js","services/persons.js","components/Notifications.js","App.js","index.js"],"names":["Filter","text","value","handleChange","onChange","Persons","dataPerson","handleRemove","map","person","name","number","onClick","event","PersonForm","handleSubmit","inputNameValue","inputNameChange","inputNumberValue","inputNumberChange","handleSubmitButton","onSubmit","type","baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","Notification","message","types","className","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filteredPersonValue","setFilteredPersonValue","filteredPersons","setFilteredPersons","notifMessage","setNotifMessage","notifTypes","setNotifTypes","useEffect","console","log","personService","addPerson","preventDefault","personObject","some","toLowerCase","window","confirm","indexPerson","findIndex","samePerson","updatePerson","filter","index","push","setTimeout","catch","error","newPersons","concat","Notifications","target","includes","removed","newList","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.17416069.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({text, value, handleChange}) => {\r\n    return (\r\n      <div>\r\n        {text} <input value={value} onChange={handleChange} />\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst Persons = ({dataPerson, handleRemove}) => {\r\n  return (\r\n    <div>\r\n      {dataPerson.map(\r\n        person => \r\n        <li key={person.name}>\r\n          {person.name} {person.number}\r\n          <button onClick={(event) => {handleRemove(event, person)}}>delete</button>\r\n        </li>\r\n      )}\r\n     </div>\r\n  )\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst PersonForm = ({handleSubmit, inputNameValue, inputNameChange, inputNumberValue, inputNumberChange, handleSubmitButton }) => {\r\n    return (\r\n      <div>\r\n        <form onSubmit={handleSubmit}>\r\n          <div>\r\n            name: <input value={inputNameValue} onChange={inputNameChange} />< br/>\r\n            number: <input value={inputNumberValue} type=\"tel\" onChange={inputNumberChange} />\r\n          </div>\r\n          <div>\r\n            <button type=\"submit\" onClick={handleSubmitButton}>add</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default PersonForm","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, remove, update }","import React from 'react'\r\n\r\nconst Notification = ({ message, types }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className={types}>\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Notification","import React, { useState, useEffect } from 'react'\r\nimport Filter from './components/Filter'\r\nimport Persons from './components/Persons'\r\nimport PersonForm from './components/PersonForm'\r\nimport personService from './services/persons'\r\nimport Notifications from './components/Notifications'\r\n\r\nconst App = () => {\r\n\r\n  const [ persons, setPersons ] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ filteredPersonValue, setFilteredPersonValue ] = useState('')\r\n  const [ filteredPersons, setFilteredPersons ] = useState([])\r\n  const [ notifMessage, setNotifMessage ] = useState('')\r\n  const [ notifTypes, setNotifTypes ] = useState('')\r\n  \r\n\r\n  // fetch data from json\r\n  useEffect(() => {\r\n    console.log('in effect')\r\n    personService\r\n      .getAll()\r\n      .then(response => {\r\n        console.log('personService OK')\r\n        setPersons(response)\r\n        setFilteredPersons(response)\r\n      })\r\n  }, [])\r\n\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    // Create object person to store the data input\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n\r\n    if ( persons.some( person => person.name.toLowerCase() === newName.toLowerCase()) ) {\r\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\r\n        \r\n        let indexPerson = persons.findIndex((person) => person.name.toLowerCase() === newName.toLowerCase())\r\n        let samePerson = persons[indexPerson]\r\n\r\n        personService\r\n          .update(samePerson.id, personObject)\r\n          .then(response => {\r\n            console.log('update success!')\r\n            let updatePerson = persons.filter(index => index.id !== samePerson.id)\r\n            updatePerson.push(response)\r\n            setPersons(updatePerson)\r\n            setFilteredPersons(updatePerson)\r\n\r\n            // Reset the input string\r\n            setNewName('')\r\n            setNewNumber('')\r\n            setFilteredPersonValue('')\r\n\r\n            //success added\r\n            setNotifMessage(`'${samePerson.name}' s number have been updated`)\r\n            setNotifTypes('success')\r\n            setTimeout(() => {\r\n              setNotifMessage(null)\r\n            }, 5000)\r\n          })\r\n          .catch(error => {\r\n            console.log('fail')\r\n            console.log(error.response.data.error)\r\n            //Notification\r\n            //setNotifMessage(`'${samePerson.name}' has already been removed from the server`)\r\n            setNotifMessage(error.response.data.error)\r\n            setNotifTypes('error')\r\n            setTimeout(() => {\r\n              setNotifMessage(null)\r\n            }, 5000)\r\n          })\r\n      }\r\n    } else {\r\n      // Save the new input on server\r\n      personService\r\n        .create(personObject)\r\n        .then(response => {\r\n          console.log('create success!')\r\n          const newPersons = persons.concat(response)\r\n\r\n          setPersons(newPersons)\r\n          setFilteredPersons(newPersons)\r\n          // Reset the input string\r\n          setNewName('')\r\n          setNewNumber('')\r\n          setFilteredPersonValue('')\r\n\r\n          //Notification\r\n          setNotifMessage(`'${response.name}' is successfully added.`)\r\n          setNotifTypes('success')\r\n          setTimeout(() => {\r\n            setNotifMessage(null)\r\n          }, 5000)\r\n        })\r\n        .catch(error => {\r\n          console.log('fail')\r\n          console.log(error.response.data.error)\r\n          //Notification\r\n          //setNotifMessage(`'${personObject.name}' is already on the server.`)\r\n          setNotifMessage(error.response.data.error)\r\n          setNotifTypes('error')\r\n          setTimeout(() => {\r\n            setNotifMessage(null)\r\n            setNotifTypes('')\r\n          }, 5000)\r\n        })\r\n    }\r\n  }\r\n\r\n  const removePerson = (event, removed) => {\r\n    event.preventDefault()\r\n\r\n    if (window.confirm(`Delete ${removed.name}?`)) {\r\n      personService\r\n      .remove(removed.id)\r\n      .then( () => {\r\n        console.log('delete success!')\r\n        let newList = persons.filter( (person) => removed.id !== person.id )\r\n  \r\n        setPersons(newList)\r\n        setFilteredPersons(newList)\r\n\r\n        //Notification\r\n        setNotifMessage(`${removed.name} is successfully deleted.`)\r\n        setNotifTypes('success')\r\n        setTimeout(() => {\r\n          setNotifMessage(null)\r\n          setNotifTypes('')\r\n        }, 5000)\r\n      })\r\n      .catch(error => {\r\n        console.log('fail')\r\n        //Notification\r\n        setNotifMessage(`There's an error`)\r\n        setNotifTypes('error')\r\n        setTimeout(() => {\r\n          setNotifMessage(null)\r\n          setNotifTypes('')\r\n        }, 5000)\r\n      })\r\n    }\r\n  }\r\n\r\n  // save user input to array\r\n  const handlePersonChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterPerson = (event) => {\r\n    setFilteredPersonValue(event.target.value)\r\n    // filter the array\r\n    setFilteredPersons(persons.filter(person => person.name.toLowerCase().includes(event.target.value.toLowerCase())))\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n\r\n      <Notifications message={notifMessage} types={notifTypes} />\r\n\r\n      <Filter \r\n        text=\"filter shown with:\"\r\n        value={filteredPersonValue}\r\n        handleChange={handleFilterPerson} \r\n      />\r\n\r\n      <h3>Add new person</h3>\r\n\r\n      <PersonForm \r\n        handleSubmit={addPerson}\r\n        inputNameValue={newName}\r\n        inputNameChange={handlePersonChange}\r\n        inputNumberValue={newNumber}\r\n        inputNumberChange={handleNumberChange}\r\n        handleSubmitButton={addPerson}\r\n      />\r\n\r\n      <h3>Numbers</h3>\r\n      \r\n      <Persons \r\n        dataPerson={filteredPersons}\r\n        handleRemove={removePerson} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}